ğ—ªğ—µğ—®ğ˜ ğ—¶ğ˜€ ğ—® ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—² ğ—–ğ—¼ğ—ºğ—½ğ—¼ğ—»ğ—²ğ—»ğ˜ ğ—¶ğ—» ğ—”ğ—¦ğ—£.ğ—¡ğ—˜ğ—§ ğ—–ğ—¼ğ—¿ğ—²? ğŸ’¡  
  
In [ASP.NET](http://asp.net/) Core, middleware components are the building blocks of the request pipeline. The request pipeline is a series of steps that process HTTP requests and responses. Each middleware component is a single step in this pipeline that can perform operations on the incoming request, pass the request to the next component, and modify the outgoing response.  
  
ğ—˜ğ˜…ğ—®ğ—ºğ—½ğ—¹ğ—²: ğ—Ÿğ—¼ğ—´ğ—´ğ—¶ğ—»ğ—´ ğ—§ğ—¿ğ—®ğ—»ğ˜€ğ—®ğ—°ğ˜ğ—¶ğ—¼ğ—»ğ˜€  
Imagine a banking app where you log every transaction request for auditing. Each time a transaction request is made (e.g.,Â POST /transactions), you log details like the request path, method etc  
  
ğ—¦ğ—¼ğ—¹ğ˜‚ğ˜ğ—¶ğ—¼ğ—»: ğ—¨ğ˜€ğ—¶ğ—»ğ—´ ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—²  
We can create a custom middleware to handle this.  
  
ğ—¦ğ˜ğ—²ğ—½ ğŸ­: ğ—–ğ—¿ğ—²ğ—®ğ˜ğ—² ğ˜ğ—µğ—² ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—² ğ—–ğ—¹ğ—®ğ˜€ğ˜€  
First, create a middleware class that logs transaction details.  
  
public class TransactionLoggingMiddleware  
{  
private readonly RequestDelegate _next;  
private readonly ILogger<TransactionLoggingMiddleware> _logger;  
  
public TransactionLoggingMiddleware(RequestDelegate next, ILogger<TransactionLoggingMiddleware> logger)  
{  
_next = next;  
_logger = logger;  
}  
  
public async Task InvokeAsync(HttpContext context) {  
var req = context.Request;  
if (req.Path.StartsWithSegments("/transactions"))  
{  
_logger.Log("Received at:", DateTime.UtcNow);  
_logger.Log("Path:", req .Path);  
_logger.Log("Method:", req.Method);  
}  
  
await _next(context);  
  
if (context.Request.Path.StartsWithSegments("/transactions")) {  
_logger.Log("Processed at ", DateTime.UtcNow);  
}  
}  
}  
  
ğ—¦ğ˜ğ—²ğ—½ ğŸ®: ğ—¥ğ—²ğ—´ğ—¶ğ˜€ğ˜ğ—²ğ—¿ ğ˜ğ—µğ—² ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—² ğ—¶ğ—» ğ˜ğ—µğ—² ğ—£ğ—¶ğ—½ğ—²ğ—¹ğ—¶ğ—»ğ—²  
var app = [builder.Build](http://builder.build/)();  
  
// Register the custom middleware  
app.UseMiddleware<TransactionLoggingMiddleware>();  
  
// Final delegate to handle the request  
[app.Run](http://app.run/)(async context =>  
{  
await context.Response.WriteAsync("Hello Final delegate.");  
});  
[app.Run](http://app.run/)();  
  
ğ—˜ğ˜…ğ—²ğ—°ğ˜‚ğ˜ğ—¶ğ—¼ğ—» ğ—™ğ—¹ğ—¼ğ˜„:  
  
ğŸ­. ğ—œğ—»ğ—°ğ—¼ğ—ºğ—¶ğ—»ğ—´ ğ—¥ğ—²ğ—¾ğ˜‚ğ—²ğ˜€ğ˜: A request made to `/transactions` url.  
ğŸ®. ğ—§ğ—¿ğ—®ğ—»ğ˜€ğ—®ğ—°ğ˜ğ—¶ğ—¼ğ—»ğ—Ÿğ—¼ğ—´ğ—´ğ—¶ğ—»ğ—´ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—² (ğ—•ğ—²ğ—³ğ—¼ğ—¿ğ—²):  
- Checks if the request path starts with `/transactions`.  
- Logs the start time, request path, and request method.  
ğŸ¯. ğ—¡ğ—²ğ˜…ğ˜ ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—²: The request is passed to the next middleware component in the pipeline.  
ğŸ°. ğ—§ğ—¿ğ—®ğ—»ğ˜€ğ—®ğ—°ğ˜ğ—¶ğ—¼ğ—»ğ—Ÿğ—¼ğ—´ğ—´ğ—¶ğ—»ğ—´ğ— ğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—² (ğ—”ğ—³ğ˜ğ—²ğ—¿):  
â€¢ After the next middleware has processed the request, it checks again if the request path starts with `/transactions`.  
â€¢ Logs the end time.  
ğŸ±. ğ—™ğ—¶ğ—»ğ—®ğ—¹ ğ——ğ—²ğ—¹ğ—²ğ—´ğ—®ğ˜ğ—²: The final delegate handles the request and sends a response.  
  
ğ—ªğ—µğ—®ğ˜'ğ˜€ ğ˜†ğ—¼ğ˜‚ğ—¿ ğ—³ğ—®ğ˜ƒğ—¼ğ˜‚ğ—¿ğ—¶ğ˜ğ—² ğ—ºğ—¶ğ—±ğ—±ğ—¹ğ—²ğ˜„ğ—®ğ—¿ğ—² ğ—°ğ—¼ğ—ºğ—½ğ—¼ğ—»ğ—²ğ—»ğ˜ ğ—¶ğ—» ğ—”ğ—¦ğ—£.ğ—¡ğ—˜ğ—§ ğ—–ğ—¼ğ—¿ğ—²?  
  
Repost and follow [](https://www.linkedin.com/in/ACoAAAYQc64BSfg1Cn-5JmOosbn_8KDfOhy1dTE)[Dharamveer Dhiman](https://www.linkedin.com/in/dharamveer-dhiman-2120a62a/) for more tips.  
  
[hashtag#ASPNetCore](https://www.linkedin.com/feed/hashtag/?keywords=aspnetcore&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592) [hashtag#Middleware](https://www.linkedin.com/feed/hashtag/?keywords=middleware&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592) [hashtag#DotNet](https://www.linkedin.com/feed/hashtag/?keywords=dotnet&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592) [hashtag#WebDevelopment](https://www.linkedin.com/feed/hashtag/?keywords=webdevelopment&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592) [hashtag#CodingTips](https://www.linkedin.com/feed/hashtag/?keywords=codingtips&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592) [hashtag#DeveloperCommunity](https://www.linkedin.com/feed/hashtag/?keywords=developercommunity&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592) [hashtag#CSharp](https://www.linkedin.com/feed/hashtag/?keywords=csharp&highlightedUpdateUrns=urn%3Ali%3Aactivity%3A7275691989629550592)  
  
Reference: 'Microsoft documentation'